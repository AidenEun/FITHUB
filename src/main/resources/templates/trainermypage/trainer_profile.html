<!DOCTYPE HTML>
<!--
	Slate by Pixelarity
	pixelarity.com | hello@pixelarity.com
	License: pixelarity.com/license
-->
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Untitled</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<noscript><link rel="stylesheet" th:href="@{/assets/css/noscript.css}" /></noscript>
	<link rel="stylesheet" th:href="@{/assets/css/index.css}" />
	<link rel="stylesheet" th:href="@{/assets/css/sidebar.css}" />

</head>
<style>


/* 프로필 */

.thumbnail_box .thumbnail_img{
	width: 25%;
    height: 310px;
    float: left;
    border-radius: 5px;
}
.thumbnail_img .thumbnail_img_top{
	height: 260px;
}
.thumbnail_img .thumbnail_img_bottom{
    text-align: center;
    padding: 11px;
	height: 50px;
}

.thumbnail_box .thumbnail_div{
    width: 75%;
    height: 310px;
    float: left;
    margin-bottom: 30px;
	font-size : 11px;

}

	img.thumbnail{
		display:block;
		clear:both;
		width:100px;
	}
	table.careerTable tr th{
		width: 15%;
	}
</style>
<body class="is-preload">


<!-- Header -->
<th:block th:replace="~{layout/header::header(${session.loginUser},${session.user},${session.trainer},${session.admin})}"></th:block>

<!-- Main -->
<section id="main" class="wrapper sidebar left">
	<div class="inner">

		<header class="major">
			<h2>마이페이지</h2>
			<p>트레이너 프로필</p>
		</header>


		<!-- Content -->
		<div class="content">

			<!-- 게시글 리스트 띄우는 테이블 -->
			<form id="profileForm" name="profileForm" method="post" th:action="@{/trainermypage/trainer_myprofile}" enctype="multipart/form-data">

			<div class="thumbnail_box">
				<div class="thumbnail_img">
					<div class="thumbnail_img_top">
						<th:block th:if="${profiles != null and profiles.size() > 0}" th:each="file : ${profiles}">
							<th:block th:with="sar=${file.orgName.split('[.]')}">
								<th:block th:with="ext=${sar[sar.length-1]}">
									<th:block th:if="${ext == 'jpg' or ext == 'jpeg' or ext == 'png' or ext == 'gif' or ext == 'webp'}">
										<img style="width:100%;" th:src="@{/trainermypage/thumbnail (sysName=${file.sysName})}">
									</th:block>
								</th:block>
							</th:block>
						</th:block>
						<th:block th:unless="${profiles != null and profiles.size() > 0}">
							<img style="width:100%;" th:src="@{/trainermypage/thumbnail (sysName='profile_img.png')}">
						</th:block>
					</div>
					<div class="thumbnail_img_bottom">
					</div>
				</div>

						<div class="thumbnail_div">
						<table style="margin: auto 0;">
							<tr>
								<td width="20%">닉네임(아이디)</td>
								<td>
									<div class="inputBox">
										<input readonly  name="trainerNickname" type="text" id="trainerNickname" class="inputText" placeholder="닉네임" th:value="${trainer.trainerNickname}" >
									</div>
								</td>
								<td>
									<div class="inputBox">
										<input readonly name="trainerId" type="text" id="trainerId" class="inputText" placeholder="아이디" th:value="${trainer.trainerId}" >
									</div>
								</td>

							</tr>
							<tr>
								<td>파트</td>
								<td colspan="2">
									<div class="inputBox">
										<input readonly name="trainerPart" type="text" id="trainerPart" class="inputText" placeholder="파트" th:value="${trainer.trainerPart}" >
									</div>
								</td>
							</tr>
							<tr>
								<td>경력</td>
								<td colspan="2">
									<div class="inputBox">
										<input readonly name="trainerCareer" type="text" id="trainerCareer" class="inputText" placeholder="파트" th:value="${trainer.trainerCareer}" >
									</div>
								</td>

							</tr>
							<tr>
								<td>구독자수</td>
								<td colspan="2">
									<div class="inputBox">
										<input readonly name="subscribe" type="text" id="subscribe" class="inputText" placeholder="구독자수" th:value="${subPageMaker.total}" >
									</div>
								</td>
							</tr>
							<tr>
								<td></td>
								<td colspan="2">
									<th:block th:if="${session.loginUser} != ${trainer.trainerId}">
										<a href="#">구독하기</a>
									</th:block>
									<th:block th:if="${session.loginUser} == ${trainer.trainerId}">
										<a href="/trainermypage/trainer_profile_modify">수정하기</a>
									</th:block>
								</td>
							</tr>
						</table>
					</div>
				</div>


				<table>
					<tr>
						<th>나의 소개	</th>
					</tr>
					<tr>
						<td>
							<div>
								<textarea readonly name="trainerIntro" class="inputText" id="trainerIntro" style="height:100px; resize:none">[[${trainer.trainerIntro}]]</textarea>
							</div>
						</td>
					</tr>
				</table>

				<table class="careerTable">
					<tr>
						<th colspan="2">트레이너 자격증 및 경력사항</th>
					</tr>
					<tr th:class="${'r'+fileStat.index}" th:if="${files != null and files.size() > 0}" th:each="file : ${files}">
						<th>파일 첨부[[${fileStat.index+1}]]</th>
						<td th:class="${'file'+fileStat.index+'_cont'}">
							<div style="float:left;">
								<input type="file" name="files" th:id="${'file'+fileStat.index}" style="display:none">
								<span th:id="${'file'+fileStat.index+'name'}" th:text="${file.orgName}"></span>
							</div>

							<input type="hidden" name="orgname" th:value="${file.orgName}">
							<th:block th:with="sar=${file.orgName.split('[.]')}">
								<th:block th:with="ext=${sar[sar.length-1]}">
									<img th:if="${ext == 'jpg' or ext == 'jpeg' or ext == 'png' or ext == 'gif' or ext == 'webp'}" th:src="@{/trainermypage/thumbnail (sysName=${file.sysName})}" class="thumbnail">
								</th:block>
							</th:block>
						</td>
					</tr>

					<input type="hidden" value="" name="updateCnt" id="updateCnt">
				</table>
			</form>

			<table>
				<tr>
					<td colspan="6">[[${trainer.trainerNickname}]]님의 게시글<span style="float:right;">글 개수 : [[${pageMaker.total}]]</span></td>
				</tr>
				<tr align="center" valign="middle">
					<th width="8%">번호</th>
					<th></th>
					<th>제목</th>
					<th width="15%">작성자</th>
					<th width="17%">날짜</th>
					<th width="10%">조회수</th>
				</tr>
				<tr th:if="${list != null and list.size()>0}" th:each="board : ${list}">
					<td>[[${board.boardNum}]]</td>
					<td>
						<sup class="hot" th:if="${recent_reply[boardStat.index] == 'O'}">Hot</sup>
						<sup class="new" th:if="${newly_board[boardStat.index] == 'O'}">New</sup>
					</td>
					<td>
						<a class="get" th:href="${board.boardNum}">
							[[${board.boardTitle}]]
							<span class="reply_cnt" th:text="'['+${reply_cnt_list[boardStat.index]}+']'"></span>
						</a>
					</td>
					<td>[[${board.userId}]]</td>
					<td>
						[[${board.regdate}]]
					</td>
					<td>[[${board.viewCnt}]]</td>
				</tr>
				<th:block th:if="${list == null or list.size() == 0}">
					<tr>
						<td colspan="6" style="text-align: center; font-size: 20px;">등록된
							게시글이 없습니다.</td>
					</tr>
				</th:block>
			</table>
				<!-- 페이징 처리하는 테이블 -->
			<table class="pagination">
				<tr align="center" valign="middle">
					<td>
						<a class="changePage" th:if="${pageMaker.prev}" th:href="${pageMaker.startPage-1}">&lt;</a>
						<th:block th:each="i : ${#numbers.sequence(pageMaker.startPage,pageMaker.endPage)}">
							<span class="nowPage" th:text="${i}" th:if="${pageMaker.cri.pagenum == i}"></span>
							<a class="changePage" th:href="${i}" th:text="${i}" th:unless="${pageMaker.cri.pagenum == i}"></a>
						</th:block>
						<a class="changePage" th:if="${pageMaker.next}" th:href="${pageMaker.endPage+1}">&gt;</a>
					</td>
				</tr>
			</table>

			<!--다이어리-->
			<table>
				<tr>
					<td>[[${trainer.trainerNickname}]]님의 다이어리</td>
				</tr>
				<tr>
					<td>
						<div>

						</div>
					</td>
				</tr>
			</table>



		</div>

		<form name="pageForm" id="pageForm" th:action="@{/trainermypage/trainer_myprofile}">
			<input type="hidden" name="pagenum" th:value="${pageMaker.cri.pagenum}">
			<input type="hidden" name="amount" th:value="${pageMaker.cri.amount}">
			<input type="hidden" name="trainerId" th:value="${trainer.trainerId}">
		</form>

		<!-- Sidebar -->
		<th:block th:replace="~{layout/trainermypage_sidebar::sidebar(${session.loginUser})}"></th:block>

	</div>
</section>

<!-- Footer -->
<th:block th:replace="~{layout/footer::footer}"></th:block>

<!-- Scripts -->
<script th:src="@{/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/js/jquery.dropotron.min.js}"></script>
<script th:src="@{/assets/js/jquery.scrollex.min.js}"></script>
<script th:src="@{/assets/js/browser.min.js}"></script>
<script th:src="@{/assets/js/breakpoints.min.js}"></script>
<script th:src="@{/assets/js/util_sub.js}"></script>
<script th:src="@{/assets/js/main_sub.js}"></script>

<script th:src="@{/assets/js/sidebar.js}"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:inline="javascript">





		const pageForm = $("#pageForm");

	$(".changePage").on("click",function(e){
		//e(이벤트)의 기본 작동 막기
		e.preventDefault();
		let pagenum = $(this).attr("href");
		pageForm.find("input[name='pagenum']").val(pagenum);
		pageForm.submit();
	});

</script>
</body>
</html>