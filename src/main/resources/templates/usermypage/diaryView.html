<!DOCTYPE HTML>
<!--
	Slate by Pixelarity
	pixelarity.com | hello@pixelarity.com
	License: pixelarity.com/license
-->
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Fit Hub</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" th:href="@{/assets/css/index.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/sidebar.css}"/>
    <link rel="stylesheet" th:href="@{/assets/css/profileModal.css}"/>
    <noscript>
        <link rel="stylesheet" th:href="@{/assets/css/noscript.css}"/>
    </noscript>

</head>
<style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;

    }


    /* MAIN IMG 게시글 상단 고정 */
    #top_main_img {
        width: 100%;
        height: 250px;
        border: 1px solid red;
    }

    #container1 {
        margin: 0 auto;
        width: 1080px;
        height: 100%;
        display: flex;
        justify-content: center;
    }

    /* #container1::after{
        clear: both;
    } */
    #container1 #side_box {
        /* float: left; */
        width: 310px;
        height: 100%;
        border: 1px solid violet;
        /* background-color: antiquewhite; */
    }

    #container1 #main_box {
        /* float: left; */
        height: 100%;
        width: 770px;
        /* border: 1px solid violet; */
        /* background-color: yellowgreen; */
    }

    /* 사이드 카테고리  */
    #container1 #side_box .cate_list {
        list-style: none;
    }

    #container1 #side_box .cate_list li {
        margin: 30px;

    }

    .diary_write {
        margin: 20px;
    }

    .input_area {
        display: flex;
        justify-content: space-between;
    }

    .list_area {
        height: 100px;
        border: 1px solid green;
        margin-top: 20px;
        border-radius: 10px;
    }


    .total_area {
        display: flex;
        justify-content: space-between;
    }

    .diary_contents {
        resize: none;
    }

    .box_flex {
        display: flex;
        justify-content: space-between;
    }

    td div > input[type=text]:nth-child(2), td div > input[type=text]:nth-child(3) {
        text-align: center;
    }


    td .input_area > input[type=button]:last-child {
        width: 30px;
        background: url(/images/addbutton.png) no-repeat;
        background-size: 50% 50%;
        background-position: center;
        /* box-shadow: inset 0 0 0 2px #5a810086; */
    }

    .food_area div:last-child input[type=button] {
        width: 100%;
        margin-top: 10px;
        border-radius: 5px;
    }

    .ex_area div:last-child input[type=button] {
        width: 100%;
        margin-top: 10px;
        border-radius: 5px;
    }

    /* 추가한 css */
    table tbody tr:nth-child(2n + 1) {
        background-color: white;

    }

    td div > input[type=button] {
        box-shadow: inset 0 0 0 2px #e6e6e6;
    }

    .food_area .list_area {
        text-align: center;
        padding: 10px;
        display: block;
        height: 100px;
        width: 364.1px;
        overflow-y: auto;

    }

    .excrcise_list.list_area {
        text-align: center;
        padding: 10px;
        display: block;
        height: 100px;
        width: 750.20px;
        overflow-y: auto;

    }

    .total_area input[type=text] {
        text-align: center !important;
    }

    .total_area #carbo, .total_area #protein, .total_area #fat {
        text-align: right !important;
    }

    .mychallBtn.viewchallBtn {
        /*border: 1px solid #5a8100 !important;*/
        color: #5a8100;
        background-color: #ebede1;
        box-shadow: inset 0 0 0 2px gray;

    }

    .mychall_area {
        text-align: center;
    }

    input[readonly] {
        pointer-events: none;
    }

    .weight_result div {
        width: 100%;
    }

    .weight_result div:nth-child(1) {
        margin-right: 6px;
    }

    .input_area input[type=text] {
        text-align: center;
    }

    .food_area .input_area input[type=text]:nth-child(2) {
        text-align: center !important;
    }


</style>
<body class="is-preload">

<!-- Header -->
<th:block th:replace="~{layout/header::header(${session.loginUser},${session.user},${session.trainer},${session.admin})}"></th:block>


<div id="top_main_img">
    이미지 추가 예정
</div>


<div id="container1">
    <div id="side_box">
        <div>마이페이지</div>
        <div>
            <ul class="cate_list">
                <li>프로필</li>
                <li>나의 다이어리</li>
                <li>나의 챌린지</li>
                <li>나의 트레이너</li>
                <li>북마크</li>
                <li>내가 쓴 게시글</li>
                <li>내 정보 수정</li>
            </ul>
        </div>
    </div>
    <div id="main_box">
        <form id="diaryForm" th:action="@{/usermypage/diaryRemove}" method="post">
            <table class="diary_write">
                <tr>
                    <td>
                        <input type="hidden" name="choicedate" th:value="${diary.regdate}">
                        <input type="text" name="regdate" th:value="${diary.regdate}" readonly>
                        <input type="hidden" name="diaryNum" th:value="${diary.diaryNum}">
                    </td>
                    <td>
                        <input type="text" th:value="${user.userNickname}" readonly>
                        <input type="hidden" id="userid" name="userId" th:value="${diary.userId}">
                    </td>
                </tr>
                <tr>
                    <!-- <td></td> -->
                    <td colspan="2"><input type="text" name="diaryTitle" th:value="${diary.diaryTitle}" readonly></td>
                </tr>
                <tr>
                    <!-- <td></td> -->
                    <td colspan="2">
                        <div class="weight_area box_flex">
                            <div><input type="text" value="목표 체중" readonly></div>

                            <div><input type="text" id="weightGoal" th:value="${user.weightGoal}+kg" readonly></div>

                            <div><input type="text" value="현재 체중" readonly></div>

                            <div><input type="text" name="todayWeight" id="todayweight"
                                        th:value="${diary.todayWeight}+kg" readonly>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="weight_result box_flex">
                            <div><input type="text" value="오늘의 비교" readonly></div>
                            <div><input type="text" id="resultweight" readonly th:value="${resultweight}+kg"></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="food_area">
                        <div class="bf_input input_area">
                            <input type="text" value="아침" readonly>
                            <input type="hidden" name="todayBreakfast" th:value="${diary.todayBreakfast}">
                            <input type="text" id="bfCal" value="총" readonly>
                            <input type="text" th:value="${foodCalArr[0]}+kcal" readonly>
                        </div>
                        <div class="list_area" id="bf_result" th:text="${listNameArr[0]}" readonly></div>
                    </td>
                    <td class="food_area">
                        <div class="lunch_input input_area">
                            <input type="text" value="점심" readonly>
                            <input type="hidden" name="todayLunch" th:value="${diary.todayLunch}">
                            <input type="text" id="lunchCal" value="총" readonly>
                            <input type="text" th:value="${foodCalArr[1]}+kcal" readonly>
                        </div>
                        <div type="text" class="list_area" id="lunch_result" th:text="${listNameArr[1]}" readonly>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="food_area">
                        <div class="dinner_input input_area">
                            <input type="text" value="저녁" readonly>
                            <input type="hidden" name="todayDinner" th:value="${diary.todayDinner}">
                            <input type="text" id="dinnerCal" value="총" readonly>
                            <input type="text" th:value="${foodCalArr[2]}+kcal" readonly>
                        </div>
                        <div type="text" class="list_area" id="dinner_result" th:text="${listNameArr[2]}"
                             readonly></div>

                    </td>
                    <td class="food_area">
                        <div class="snack_input input_area">
                            <input type="text" value="간식" readonly>
                            <input type="hidden" name="todaySnack" th:value="${diary.todaySnack}">
                            <input type="text" id="snackCal" value="총" readonly>
                            <input type="text" th:value="${foodCalArr[3]}+kcal" readonly>
                        </div>
                        <div type="text" class="list_area" id="snack_result" th:text="${listNameArr[3]}" readonly></div>

                    </td>
                </tr>
                <tr>
                    <!-- <td></td> -->
                    <td colspan="2" class="ex_area">
                        <div class="ex_input input_area">
                            <input type="text" value="운동" readonly>
                            <input type="hidden" name="todayExer" th:value="${diary.todayExer}">
                            <input type="text" value="총" readonly>
                            <input type="text" id="exerCal"
                                   th:value="${diary.exerCalories != null ? diary.exerCalories +'kcal' : '0kcal'}"
                                   readonly style="text-align: left;">
                        </div>
                        <div type="text" class="excrcise_list list_area" id="exer_result" th:text="${listNameArr[4]}"
                             readonly>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="total_area" style="text-align: center">
                            <input type="button" value="최종 칼로리" style="margin-right: 15px">
                            <input type="text" id="totalFood"
                                   th:value="${diary.foodCalories != null ? diary.foodCalories+'kcal' : '0kcal'}"
                                   readonly>
                            <input type="text" value="-" readonly>
                            <input type="text" id="totalexer"
                                   th:value="${diary.exerCalories != null ? diary.exerCalories+'kcal' : '0kcal'}"
                                   readonly>
                            <input type="text" value="=" readonly>
                            <input type="text" id="totalResult"
                                   th:value="${totalResult != null ? totalResult+'kcal' : '0kcal'}" readonly>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td colspan="2">
                        <div class="total_area" style="text-align: center">
                            <input type="text" value="목표 칼로리" readonly>
                            <input type="text" th:value="${user.caloriesGoal}+kcal" id="caloriesGoal" readonly>
                            <input type="text" value="-" readonly>
                            <input type="text" th:value="${totalResult != null ? totalResult+'kcal' : '0kcal'}"
                                   readonly>
                            <input type="text" value="=" readonly>
                            <input type="text" id="todayCal"
                                   th:value="${user.caloriesGoal}-${totalResult}+'kcal'" readonly>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="total_area" style="display: flex; justify-content: space-between">
                            <input type="text" value="탄수화물" readonly>
                            <input type="text" th:value="${diary.carbo != null ? diary.carbo+'g' : '0g'}" readonly>

                            <input type="text" value="단백질" readonly>
                            <input type="text" th:value="${diary.protein != null ? diary.protein+'g' : '0g'}" readonly>

                            <input type="text" value="지방" readonly>
                            <input type="text" th:value="${diary.fat != null ? diary.fat+'g' : '0g'}" readonly>

                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <textarea name="diaryContent" class="diary_contents" cols="30" rows="10" id="summernote"
                                  th:text="${diary.diaryContent}" readonly onfocus="this.blur()"></textarea>
                    </td>
                </tr>

                <tr>
                    <td>
                        <!--폼으로 보낼때 체크 눌렀지는 확인하는 유효성 검사 필요 -->
                        <input type="button" value="챌린지 도장 찍기" class="mychallBtn viewchallBtn" id="mychallBtn">
                    </td>
                    <td>
                        <!--                        공백으로 비워두기-->
                    </td>
                </tr>
                <tr class="challcheckList" id="challList">

                    <td colspan="2">
                        <input type="hidden" id="myINGChallNum" name="myINGChallNum">
                        <table id="mychallDataList">
                            <tbody id="chall-table">
                            <!-- <th:block th:if="${#strings.isEmpty(diary.myChallNum)}">-->
                            <th:block th:if="${ myINGChallNum == null or myINGChallNum.size() == 0}">
                                <tr>
                                    <!-- 챌린지가 없을 때의 블록 -->
                                    <td style="text-align: center;">진행 중인 챌린지가 없습니다.</td>
                                </tr>
                            </th:block>
                            <th:block th:if="${ myINGChallNum != null or myINGChallNum.size() > 0}">
                                <tr class="mychall_area" th:each="myINGChallNum : ${myINGChallNum}">
                                    <td>
                                        <input type="checkbox" name="myChallNum" onClick="return false;"
                                               th:each="sccChallDTOList : ${sccChallDTOList}"
                                               th:id="'challNum_' + ${myINGChallNum.challNum}"
                                               th:value="${myINGChallNum.challNum}"
                                               th:checked="${myINGChallNum.challNum == sccChallDTOList.challNum}">
                                        <label th:for="'challNum_' + ${myINGChallNum.challNum}">
                                            [[${myINGChallNum.challName}]]</label>
                                    </td>
                                </tr>
                            </th:block>
                            </tbody>
                        </table>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div>
                            <input type="button" value="삭제" onclick="diaryremove()">
                        </div>
                    </td>
                    <td>
                        <div style="text-align: right">
                            <input type="button" value="목록" onclick="location.href='/usermypage/user_diary'">
                            <input type="button" value="수정" onclick="moveModify()">
                        </div>
                    </td>
                </tr>

            </table>
        </form>

    </div>
</div>
<!-- Footer -->
<th:block th:replace="~{layout/footer::footer}"></th:block>

<!-- Scripts -->
<script th:src="@{/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/js/jquery.dropotron.min.js}"></script>
<script th:src="@{/assets/js/jquery.scrollex.min.js}"></script>
<script th:src="@{/assets/js/browser.min.js}"></script>
<script th:src="@{/assets/js/breakpoints.min.js}"></script>
<script th:src="@{/assets/js/util.js}"></script>
<script th:src="@{/assets/js/main.js}"></script>

<script th:src="@{/assets/js/sidebar.js}"></script>
<script th:src="@{/assets/js/profile.js}"></script>

<script th:src="@{/assets/js/util_sub.js}"></script>
<script th:src="@{/assets/js/main_sub.js}"></script>
<script th:src="@{/assets/js/calender.js}"></script>

<script th:src="@{https://code.jquery.com/jquery-3.6.0.min.js}"></script>
<script>


    function diaryremove() {
        if (confirm("정말 삭제하시겠습니까?") == true) {
            document.getElementById("diaryForm").submit();
        }
    }

    function moveModify() {
        const choicedate = document.getElementsByName("choicedate")[0].value;
        location.href = "/usermypage/diaryModify?choicedate=" + choicedate;
    }
</script>
</body>
</html>